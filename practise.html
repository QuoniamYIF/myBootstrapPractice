<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Practice</title>
    <script src="js/jquery.js"></script>
    <script src="js/handlebars-v3.0.3.js"></script>

    <script src="js/bootstrap.min.js"></script>

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/gallery.css" rel="stylesheet">
  </head>
  <body>
      <div class="container">
        <div class="page-header">
            <h1>相册</h1>
        </div>
        <ul class="nav nav-tabs">
            <li id="detailsbtn"><a href="#">细节</a></li>
            <li id="modalbtn"><a href="#">模态框</a></li>
        </ul>
        <br><br>

        <div id="content" class="container-fluid" role="main"></div>
      </div>
      <script id="detail_template" type="text/x-handlebars-template">
        <div class="row">
            <div class="col-sm-5">
                <img style="width:100%" src="{{src}}" />
            </div>
            <div class="col-sm-7">
                <h1>{{title}}</h1>
                <h3>{{author}}</h3>
            </div>
        </div>
      </script>
      <script id="modal_template" type="text/x-handlebars-template">
        <div id="imageModal" class="modal fade">
            <div class="modal-dialog" style="width:800">
                <div class="modal-content">
                    <div class="modal-body">
                        <img style="width:100%" src="{{src}}" />
                    </div>
                </div>
            </div>
        </div>
      </script>

      <script type="text/javascript">
        var source = $("#detail_template").html();
        var detail_template = Handlebars.compile(source);
        source = $("#modal_template").html();
        var modal_template = Handlebars.compile(source);

        var data = {
          src: "https://upload.wikimedia.org/wikipedia/commons/archive/9/97/20101017074210%21The_Earth_seen_from_Apollo_17.jpg", 
          title:"The Earth seen from Apollo 17",
          author:"Ed g2s"
        };

        var image1Data = {
          title: "image1",
          author: "Tuxtso",
          src: "https://upload.wikimedia.org/wikipedia/commons/archive/9/97/20101017074210%21The_Earth_seen_from_Apollo_17.jpg", 
        };

        console.log(image1Data.author + " " + image1Data.title + " " + image1Data.src);

        $("#detailsbtn").click(function(){
            $("#imageModal").modal('hide');

            var html = detail_template(data);
            $('#content').html(html);
        });

        $("#modalbtn").click(function(){
            var html = modal_template(data);
            $('#content').html(html);

            $("#imageModal").modal('show');

            $("#imageModal").on('hidden.bs.modal', function(){
                $('#detailsbtn').click();
            }); 
        });
      </script>
  </body>
</html>